<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DaisyQuest: Ember Duel</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app-shell">
      <header class="command-bar" role="banner">
        <div class="command-bar__brand">
          <span class="command-eyebrow">DaisyQuest</span>
          <div class="command-title">Emberfall Command Deck</div>
          <span class="command-subtitle">Real-time MMORPG operations console</span>
        </div>
        <div class="command-bar__status" aria-label="Realm status">
          <div class="status-pill">
            <span class="status-pill__label">Realm</span>
            <span class="status-pill__value">Aetheria</span>
          </div>
          <div class="status-pill">
            <span class="status-pill__label">Shard</span>
            <span class="status-pill__value">Northwatch</span>
          </div>
          <div class="status-pill status-pill--accent">
            <span class="status-pill__label">Population</span>
            <span class="status-pill__value">Stable</span>
          </div>
        </div>
      </header>
      <main class="app">
      <section class="panel auth-panel">
        <header class="panel-header">
          <div>
            <h2>Command Station</h2>
            <p class="subtitle">Secure your account before stepping into the realm.</p>
          </div>
          <div class="auth-status">
            <span id="auth-status">Offline</span>
            <button class="secondary" id="logout-button" type="button" disabled>Logout</button>
          </div>
        </header>
        <form id="auth-form" class="auth-form">
          <label for="auth-username">Username</label>
          <input id="auth-username" name="username" type="text" autocomplete="username" required />
          <label for="auth-password">Password</label>
          <input
            id="auth-password"
            name="password"
            type="password"
            autocomplete="current-password"
            required
          />
          <div class="auth-actions">
            <button class="action" type="submit" data-mode="login">Login</button>
            <button class="secondary" type="submit" data-mode="register">Create Account</button>
          </div>
          <p class="form-message" id="auth-message"></p>
        </form>
      </section>
      <nav class="layout-tabs" aria-label="Primary navigation" role="tablist">
        <button
          class="layout-tab-button is-active"
          id="tab-button-map"
          type="button"
          data-tab-target="map"
          role="tab"
          aria-controls="tab-panel-map"
          aria-selected="true"
        >
          Map
        </button>
        <button
          class="layout-tab-button"
          id="tab-button-combat"
          type="button"
          data-tab-target="combat"
          role="tab"
          aria-controls="tab-panel-combat"
          aria-selected="false"
        >
          Combat
        </button>
        <button
          class="layout-tab-button"
          id="tab-button-inventory"
          type="button"
          data-tab-target="inventory"
          role="tab"
          aria-controls="tab-panel-inventory"
          aria-selected="false"
        >
          Inventory
        </button>
        <button
          class="layout-tab-button"
          id="tab-button-crafting"
          type="button"
          data-tab-target="crafting"
          role="tab"
          aria-controls="tab-panel-crafting"
          aria-selected="false"
        >
          Crafting
        </button>
        <button
          class="layout-tab-button"
          id="tab-button-trading"
          type="button"
          data-tab-target="trading"
          role="tab"
          aria-controls="tab-panel-trading"
          aria-selected="false"
        >
          Trading
        </button>
        <button
          class="layout-tab-button"
          id="tab-button-registry"
          type="button"
          data-tab-target="registry"
          role="tab"
          aria-controls="tab-panel-registry"
          aria-selected="false"
        >
          Registry
        </button>
      </nav>
      <section
        class="panel map-panel is-active"
        id="tab-panel-map"
        data-tab-panel="map"
        role="tabpanel"
        aria-labelledby="tab-button-map"
      >
        <header class="panel-header">
          <div>
            <h2>World Command View</h2>
            <p class="subtitle">
              Navigate the realm, coordinate combat, and manage encounters from one screen.
            </p>
          </div>
          <div class="map-status">
            <span class="badge">Map-First</span>
          </div>
        </header>
        <div class="map-game-layout">
          <div class="map-game-main">
            <div class="world-panel" id="world-panel">
              <header class="world-panel__header">
                <div>
                  <h3>World Map</h3>
                  <p class="subtitle">
                    Right-click to inspect, trade, or interact with nearby entities.
                  </p>
                </div>
                <div class="world-panel__status" data-world-map-hud>
                  <span class="world-panel__status-label">Travel Mode</span>
                  <span class="world-panel__status-detail" data-world-map-hint>
                    Click a tile to move â€¢ Right-click for actions
                  </span>
                </div>
              </header>
              <div class="world-panel__surface" data-world-map-surface>
                <div class="world-panel__hud" aria-hidden="true">
                  <div class="world-panel__compass">N</div>
                  <div class="world-panel__coordinates" data-world-map-coordinates>
                    Coordinates: --, --
                  </div>
                  <div class="world-panel__region" data-world-map-region>Region: --</div>
                </div>
                <div class="world-panel__entities" data-world-map-entities></div>
              </div>
            </div>
            <div class="map-utility-row">
              <div class="minimap-panel" id="minimap-panel">
                <div class="minimap-panel__header">
                  <span>Realm Minimap</span>
                  <button
                    class="secondary minimap-toggle"
                    id="minimap-toggle"
                    type="button"
                    aria-pressed="true"
                  >
                    Hide
                  </button>
                </div>
                <canvas id="minimap-canvas" width="180" height="180"></canvas>
                <div class="minimap-legend" id="minimap-legend"></div>
              </div>
              <section class="subpanel interaction-panel" id="interaction-panel">
                <header class="panel-header">
                  <div>
                    <h3>Interaction Focus</h3>
                    <p class="subtitle">Select a target on the map to reveal actions.</p>
                  </div>
                  <span class="badge">Contextual</span>
                </header>
                <div class="interaction-details" id="interaction-details">
                  <p class="caption">No target selected. Highlight a player, NPC, or object.</p>
                  <ul class="interaction-list">
                    <li><strong>Mode:</strong> Travel</li>
                    <li><strong>Engage:</strong> Select a hostile target, then choose Engage.</li>
                    <li><strong>Interact:</strong> Gather, trade, or speak when in range.</li>
                  </ul>
                </div>
                <div class="interaction-actions">
                  <button class="secondary" id="interaction-engage" type="button" disabled>
                    Engage
                  </button>
                  <button class="secondary" id="interaction-interact" type="button" disabled>
                    Interact
                  </button>
                </div>
              </section>
            </div>
          </div>
          <aside class="map-game-side">
            <section class="subpanel chat-panel">
              <header class="panel-header">
                <div>
                  <h3>Chat & Field Reports</h3>
                  <p class="subtitle">Party chatter and system updates stay visible.</p>
                </div>
                <div class="chat-tabs" role="tablist" aria-label="Chat channels">
                  <button class="chat-tab-button is-active" type="button" role="tab">Local</button>
                  <button class="chat-tab-button" type="button" role="tab">Party</button>
                  <button class="chat-tab-button" type="button" role="tab">Guild</button>
                  <button class="chat-tab-button" type="button" role="tab">System</button>
                </div>
              </header>
              <div class="chat-feed">
                <ul id="log"></ul>
              </div>
              <div class="chat-input">
                <input
                  id="chat-input"
                  type="text"
                  placeholder="Type a message..."
                  aria-label="Chat message"
                />
                <button class="secondary" type="button" disabled>Send</button>
              </div>
            </section>
            <section class="subpanel progression-panel">
              <header class="panel-header">
                <div>
                  <h3>Reward Track</h3>
                  <p class="subtitle">Fuel your rise with every victory and crafted upgrade.</p>
                </div>
                <span class="badge badge-accent" id="progress-level-badge">Level 1</span>
              </header>
              <div class="reward-track">
                <div class="track-card">
                  <div class="track-header">
                    <div>
                      <h4>Battle Mastery</h4>
                      <p class="caption">Earn XP for victories, crafting, and upgrades.</p>
                    </div>
                    <span class="badge" id="progress-xp-label">0 XP</span>
                  </div>
                  <div class="progress-track">
                    <div class="progress-fill" id="progress-fill"></div>
                  </div>
                  <div class="track-meta">
                    <span id="progress-current">0 / 120 XP</span>
                    <span id="progress-next">Next reward at Level 2</span>
                  </div>
                </div>
                <div class="reward-card" id="reward-card">
                  <h4>Next Reward</h4>
                  <p id="reward-description">Win a duel to reveal your next blessing.</p>
                  <button class="action" id="claim-reward" type="button" disabled>
                    Claim Reward
                  </button>
                </div>
              </div>
              <ul class="milestone-list" id="milestone-list"></ul>
            </section>
          </aside>
        </div>
      </section>
      <section
        class="panel combat tab-overlay"
        id="tab-panel-combat"
        data-tab-panel="combat"
        role="tabpanel"
        aria-labelledby="tab-button-combat"
        hidden
      >
        <header class="panel-header">
          <div>
            <h2>Combat Command Deck</h2>
            <p class="subtitle">Engage encounters from a dedicated tactical view.</p>
          </div>
          <div class="map-status">
            <span class="badge badge-accent">Combat Only</span>
          </div>
        </header>
        <section class="combat-dock" aria-label="Combat control deck">
          <div class="battle-stage battle-stage--compact">
            <div class="battle-scene game-world-panel" id="battle-scene" data-game-world-panel>
              <div class="game-world-layer-stack" id="game-world-layer-stack" aria-hidden="true"></div>
              <div class="battle-scene__parallax" aria-hidden="true">
                <div class="parallax-layer layer-distant"></div>
                <div class="parallax-layer layer-mid"></div>
                <div class="parallax-layer layer-near"></div>
              </div>
              <div class="battle-scene__ambient" id="battle-particles" aria-hidden="true"></div>
              <div class="battle-scene__baseline" aria-hidden="true"></div>
              <div class="caption-zone" id="caption-global" data-zone="global" aria-live="polite"></div>
              <div class="caption-zone" id="caption-player" data-zone="player" aria-live="polite"></div>
              <div class="caption-zone" id="caption-enemy" data-zone="enemy" aria-live="polite"></div>
              <div
                class="battle-combatant battle-combatant--player"
                id="battle-player"
                data-interaction-type="player"
                data-interaction-id="player"
                data-interaction-label="Hero"
                data-interaction-layer="20"
              >
                <div class="status-banners" id="player-status-banners"></div>
                <div class="battle-sprite-frame">
                  <img
                    class="battle-sprite"
                    id="player-battle-sprite"
                    src="assets/battle/avi_sprite_1_position1.png"
                    alt="Hero battle sprite"
                    loading="eager"
                  />
                </div>
                <div class="effect-bounds" data-role="player" aria-hidden="true"></div>
              </div>
              <div
                class="battle-combatant battle-combatant--enemy"
                id="battle-enemy"
                data-interaction-type="npc"
                data-interaction-id="enemy"
                data-interaction-label="Challenger"
                data-interaction-layer="30"
              >
                <div class="status-banners" id="enemy-status-banners"></div>
                <div class="battle-sprite-frame">
                  <img
                    class="battle-sprite"
                    id="enemy-battle-sprite"
                    src="assets/battle/otherworldly_beast.png"
                    alt="Enemy battle sprite"
                    loading="eager"
                  />
                </div>
                <div class="effect-bounds" data-role="enemy" aria-hidden="true"></div>
              </div>
              <div
                class="battle-scene__relic"
                data-interaction-type="object"
                data-interaction-id="battle-relic"
                data-interaction-label="Ember Relic"
                data-interaction-layer="10"
              >
                Ember Relic
              </div>
            </div>
            <div class="battle-hud battle-hud--compact">
              <div class="battle-hud__top battle-hud__panel">
                <header class="hero-header">
                  <div>
                    <h1>Combat Control</h1>
                    <p class="subtitle">
                      Initiate encounters from the map and execute abilities within this deck.
                    </p>
                  </div>
                  <div class="theme-selector">
                    <label for="theme-select">Theme</label>
                    <select id="theme-select" aria-label="Select a theme"></select>
                  </div>
                </header>
                <div class="npc-selector">
                  <label for="npc-select">Choose a challenger</label>
                  <select id="npc-select" aria-label="Select a challenger"></select>
                  <p class="npc-description" id="npc-description"></p>
                </div>
              </div>
              <div class="battle-hud__footer">
                <div class="battlefield battle-hud__panel">
                  <div class="combatant" id="player-card">
                    <h2 id="player-name">Hero</h2>
                    <div class="sprite-frame">
                      <img
                        class="sprite-portrait"
                        id="player-sprite"
                        src="assets/battle/avi_sprite_1_position1.png"
                        alt="Hero portrait"
                        loading="lazy"
                      />
                    </div>
                    <div class="bar">
                      <span>Health</span>
                      <div class="meter">
                        <div class="fill" id="player-health"></div>
                      </div>
                      <span class="value" id="player-health-value"></span>
                    </div>
                    <div class="bar">
                      <span>Mana</span>
                      <div class="meter mana">
                        <div class="fill" id="player-mana"></div>
                      </div>
                      <span class="value" id="player-mana-value"></span>
                    </div>
                  </div>
                  <div class="combatant" id="enemy-card">
                    <h2 id="enemy-name">Otherworldly Beast</h2>
                    <div class="sprite-frame">
                      <img
                        class="sprite-portrait"
                        id="enemy-sprite"
                        src="assets/battle/otherworldly_beast.png"
                        alt="Enemy portrait"
                        loading="lazy"
                      />
                    </div>
                    <div class="bar">
                      <span>Health</span>
                      <div class="meter">
                        <div class="fill" id="enemy-health"></div>
                      </div>
                      <span class="value" id="enemy-health-value"></span>
                    </div>
                    <div class="bar" id="enemy-focus-row">
                      <span>Focus</span>
                      <div class="meter focus">
                        <div class="fill" id="enemy-focus"></div>
                      </div>
                      <span class="value" id="enemy-focus-value"></span>
                    </div>
                  </div>
                </div>
                <div class="controls battle-hud__panel">
                  <div class="hotbar" id="hotbar-slots" role="list" aria-label="Hotbar"></div>
                  <button class="secondary" id="reset">Reset Battle</button>
                </div>
                <div class="spellbook-panel battle-hud__panel" id="spellbook-panel">
                  <div class="spellbook-section">
                    <h3>Spellbook</h3>
                    <p class="subtitle">Drag spells into your hotbar between fights.</p>
                    <div class="spellbook-list" id="spellbook-list" data-spellbook="spells"></div>
                  </div>
                  <div class="spellbook-section">
                    <h3>Skillbook</h3>
                    <p class="subtitle">Organize your techniques for quick access.</p>
                    <div class="spellbook-list" id="skillbook-list" data-spellbook="skills"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </section>
      <section
        class="panel inventory tab-overlay"
        id="tab-panel-inventory"
        data-tab-panel="inventory"
        role="tabpanel"
        aria-labelledby="tab-button-inventory"
        hidden
      >
        <h3>Inventory & Equipment</h3>
        <div class="inventory-grid">
          <div>
            <h4>Satchel</h4>
            <div id="inventory-list" class="inventory-list"></div>
          </div>
          <div>
            <h4>Equipped</h4>
            <div id="equipment-list" class="equipment-list"></div>
          </div>
        </div>
        <div class="loot-log">
          <h4>Recent Loot</h4>
          <ul id="loot-list"></ul>
        </div>
      </section>
      <section
        class="panel trading tab-overlay"
        id="tab-panel-trading"
        data-tab-panel="trading"
        role="tabpanel"
        aria-labelledby="tab-button-trading"
        hidden
      >
        <header class="panel-header">
          <div>
            <h3>Trade Hall</h3>
            <p class="subtitle">Open secure, server-driven trades with fellow adventurers.</p>
          </div>
          <span class="badge">Server Authoritative</span>
        </header>
        <form class="trade-form" id="trade-request-form">
          <label for="trade-target">Invite player</label>
          <input id="trade-target" type="text" placeholder="Player name" required />
          <button class="action" type="submit">Send Trade Request</button>
          <p class="form-message" id="trade-request-message"></p>
        </form>
        <div class="trade-grid" id="trade-list"></div>
      </section>
      <section
        class="panel crafting tab-overlay"
        id="tab-panel-crafting"
        data-tab-panel="crafting"
        role="tabpanel"
        aria-labelledby="tab-button-crafting"
        hidden
      >
        <h3>Crafting Atelier</h3>
        <label for="recipe-select">Recipe</label>
        <select id="recipe-select" aria-label="Select a recipe"></select>
        <p id="recipe-details" class="crafting-details"></p>
        <button class="action" id="craft-button" type="button">Craft</button>
        <p id="crafting-result" class="crafting-result"></p>
      </section>
      <section
        class="panel registry tab-overlay"
        id="tab-panel-registry"
        data-tab-panel="registry"
        role="tabpanel"
        aria-labelledby="tab-button-registry"
        hidden
      >
        <header class="panel-header">
          <div>
            <h3>Registry Workshop</h3>
            <p class="subtitle">Curate items and recipes without leaving the game.</p>
          </div>
          <div class="registry-tabs">
            <button class="tab-button is-active" type="button" data-tab="items">Items</button>
            <button class="tab-button" type="button" data-tab="recipes">Recipes</button>
          </div>
        </header>
        <div class="registry-pane is-active" data-pane="items">
          <div class="registry-grid">
            <div>
              <div class="registry-toolbar">
                <h4>Item Registry</h4>
                <button class="secondary" type="button" id="new-item">New Item</button>
              </div>
              <div id="item-registry-list" class="registry-list"></div>
            </div>
            <form id="item-editor" class="registry-form">
              <h4 id="item-form-title">Create Item</h4>
              <label for="item-id">Item Id</label>
              <input id="item-id" name="itemId" type="text" required />
              <label for="item-name">Name</label>
              <input id="item-name" name="itemName" type="text" required />
              <label for="item-description">Description</label>
              <textarea id="item-description" name="itemDescription" rows="3" required></textarea>
              <label for="item-rarity">Rarity</label>
              <select id="item-rarity" name="itemRarity" required></select>
              <div class="form-row">
                <label>
                  <input id="item-equippable" type="checkbox" />
                  Equippable
                </label>
                <select id="item-slot" name="itemSlot"></select>
              </div>
              <p class="form-message" id="item-form-message"></p>
              <button class="action" type="submit">Save Item</button>
            </form>
          </div>
        </div>
        <div class="registry-pane" data-pane="recipes">
          <div class="registry-grid">
            <div>
              <div class="registry-toolbar">
                <h4>Recipe Registry</h4>
                <button class="secondary" type="button" id="new-recipe">New Recipe</button>
              </div>
              <div id="recipe-registry-list" class="registry-list"></div>
            </div>
            <form id="recipe-editor" class="registry-form">
              <h4 id="recipe-form-title">Create Recipe</h4>
              <label for="recipe-id">Recipe Id</label>
              <input id="recipe-id" name="recipeId" type="text" required />
              <label for="recipe-name">Name</label>
              <input id="recipe-name" name="recipeName" type="text" required />
              <label for="recipe-result">Result Item</label>
              <select id="recipe-result" name="recipeResult" required></select>
              <div class="ingredients-list" id="ingredients-list"></div>
              <button class="secondary" type="button" id="add-ingredient">Add Ingredient</button>
              <p class="form-message" id="recipe-form-message"></p>
              <button class="action" type="submit">Save Recipe</button>
            </form>
          </div>
        </div>
      </section>
      </main>
    </div>
    <script type="module" src="app.js"></script>
  </body>
</html>
